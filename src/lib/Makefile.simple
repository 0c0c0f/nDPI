#
# Simple non-autotools dependent makefile
#
# ./autogen.sh
# cd src/lib
# make -f Makefile.simple
#
CFLAGS += -fPIC -DPIC -I../include -Ithird_party/include
RANLIB=ranlib

OBJECTS = $(patsubst protocols/%.c, protocols/%.o, $(wildcard protocols/*.c)) ndpi_main.o third_party/src/ndpi_patricia.o
HEADERS = $(wildcard ../include/*.h)

libndpi.a: $(OBJECTS)
	   ar rc $@ $(OBJECTS)
	   $(RANLIB) $@	       
	   
%.o: %.c $(HEADERS) Makefile
	$(CC) $(CFLAGS) -c $< -o $@

clean:
	/bin/rm -f libndpi.a $(OBJECTS)